(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{42:function(e,t,a){e.exports=a(55)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),l=a.n(r),c=(a(47),a(17)),o=a(5),i=a(6),u=a(8),m=a(7),h=a(12),p=a(9),d=(a(48),a(24),a(59)),f=a(37),b=a(58),g=(a(49),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={number:"",answer:"",status:"",hintMessage:"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0446\u0438\u0444\u0440\u044b \u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f",hintMessageClass:"normal"},a.onSend=function(e){var t=Object(h.a)(a);e.preventDefault(),4==a.state.number.length?fetch("http://localhost:8080/step",{method:"POST",mode:"cors",body:JSON.stringify({answer:a.state.number}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t.setState({answer:e.answer,status:e.status},(function(){t.props.onChangeCallback(a.state)}))})):a.setState({hintMessage:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c 4 \u0446\u0438\u0444\u0440\u044b!",hintMessageClass:"error"})},a.onChange=function(e){a.validate(e.target.value)&&a.setState(Object(c.a)({},e.target.name,e.target.value))},a.onInput=function(e){var t=a.state.number+e.target.textContent;a.validate(t)&&a.setState({number:t})},a.onRemove=function(e){a.setState({number:a.state.number.slice(0,-1)})},a.validate=function(e){return a.setState({hintMessage:"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0446\u0438\u0444\u0440\u044b \u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f",hintMessageClass:"normal"}),e.length<=4&&e.match(/^\d*$/)&&new Set(e.split("")).size==e.length},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"custom-form"},s.a.createElement(b.a,null,s.a.createElement(b.a.Group,{controlId:"formBasicEmail"},s.a.createElement(b.a.Label,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 4 \u0446\u0438\u0444\u0440\u044b:"),s.a.createElement(b.a.Control,{value:this.state.number,type:"text",name:"number",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 4958",onChange:this.onChange}),s.a.createElement(b.a.Text,{className:"text-muted "+this.state.hintMessageClass},this.state.hintMessage)),s.a.createElement("div",{className:"row justify-content-start mt-3"},s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"keyboard"},[1,2,3,4,5,6,7,8,9,0].map((function(t){return s.a.createElement(f.a,{className:"mr-3 mb-3",onClick:e.onInput},t)})),s.a.createElement(f.a,{className:"mr-3 mb-3",onClick:this.onRemove},"C")))),s.a.createElement(f.a,{variant:"primary",className:"mt-3 w-100",type:"submit",onClick:this.onSend},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),t}(s.a.Component)),E=a(57),v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={stats:[]},a.loadAndRenderStats=function(){fetch(a.props.dataUrl,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return{user:e.user,attemptsCount:e.attemptsCount}}));a.setState({stats:t})}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadAndRenderStats()}},{key:"componentWillReceiveProps",value:function(e){this.loadAndRenderStats()}},{key:"render",value:function(){var e=this,t=this.state.stats.map((function(t,a){return s.a.createElement("tr",null,(!0===e.props.isVisibleLogin||void 0===e.props.isVisibleLogin)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("td",null,a+1),s.a.createElement("td",null,t.user.login)),s.a.createElement("td",null,t.attemptsCount))}));return 0==t.length&&(t=s.a.createElement("tr",null,(!0===this.props.isVisibleLogin||void 0===this.props.isVisibleLogin)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("td",null),s.a.createElement("td",null,"\u041d\u0435\u0442 \u0438\u0433\u0440")),s.a.createElement("td",null,"\u041d\u0435\u0442 \u0438\u0433\u0440"))),s.a.createElement("div",{className:"stats"},s.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,(!0===this.props.isVisibleLogin||void 0===this.props.isVisibleLogin)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,"\u041b\u043e\u0433\u0438\u043d")),s.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a"))),s.a.createElement("tbody",null,t)))}}]),t}(s.a.Component),y=(a(53),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).statuses={game:"GAME",gameOver:"GAME_OVER"},a.state={answer:"",status:a.statuses.gameOver,welcomeMessage:'\u0427\u0442\u043e\u0431\u044b \u0438\u0433\u0440\u0430\u0442\u044c, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u041d\u0430\u0447\u0430\u0442\u044c"',number:""},a.onStart=function(e){Object(h.a)(a);fetch("http://localhost:8080/start",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){a.setState({status:e.status})}))},a.checkGameStatus=function(){a.state.status==a.statuses.gameOver&&a.setState({welcomeMessage:"\u0412\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b\u0438! \u0417\u0430\u0433\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e: ".concat(a.state.number,"! \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u043c?")},(function(){a.setState({answer:""})}))},a.formCallback=function(e){a.setState({answer:e.answer,status:e.status,number:e.number},(function(){a.checkGameStatus()}))},a.onChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"game container mt-5"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col-12 col-md-6 mb-5 content"},this.state.status===this.statuses.game&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{onChangeCallback:this.formCallback}),""!==this.state.answer&&s.a.createElement(d.a,{variant:"primary",className:"answer mt-3"},this.state.answer)),this.state.status===this.statuses.gameOver&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"text-center d-block mb-3"},this.state.welcomeMessage),s.a.createElement(f.a,{onClick:this.onStart},"\u041d\u0430\u0447\u0430\u0442\u044c"))),s.a.createElement("div",{className:"col-12 col-md-6 stats"},s.a.createElement("span",{className:"mb-2 d-block"},"\u041c\u043e\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0433\u0440\u044b:"),s.a.createElement(v,{gameState:this.state.status,isVisibleLogin:"false",dataUrl:"http://localhost:8080/userStats"}))))}}]),t}(s.a.Component)),O=a(22),j=a(29),S=(a(54),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).update=function(e){e.preventDefault(),a.props.update("pageType",e.target.getAttribute("data-page-type"))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{bg:"light"},s.a.createElement(O.a.Brand,{href:"#home"},"\u0411\u042b\u041a-\u041a\u041e\u0420\u041e\u0412\u0410"),s.a.createElement(j.a,{className:"mr-auto"},s.a.createElement(j.a.Link,{"data-page-type":"Game",onClick:this.update},"\u0418\u0433\u0440\u0430"),s.a.createElement(j.a.Link,{"data-page-type":"Stats",onClick:this.update},"\u0420\u0435\u043a\u043e\u0440\u0434\u044b")),s.a.createElement(O.a,null),s.a.createElement(O.a.Collapse,{className:"justify-content-end"},s.a.createElement(O.a.Text,null,s.a.createElement("a",{href:"#"},this.props.username)),s.a.createElement(f.a,{variant:"outline-info",className:"ml-2",href:"/logout"},"\u0412\u044b\u0439\u0442\u0438"))))}}]),t}(s.a.Component)),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={url:"",username:"",authorities:"",pageType:"Game"},a.updateState=function(e,t){a.setState(Object(c.a)({},e,t))},a.load=function(e,t){var n=Object(h.a)(a);fetch(e,{method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){var a=JSON.parse(e);n.setState({username:a.principal.username,authorities:a.principal.authorities},(function(){t&&t()}))})).catch((function(e){}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.load("/principal")}},{key:"render",value:function(){this.state.url;return s.a.createElement("div",{className:"app-container"},s.a.createElement(S,{update:this.updateState,username:this.state.username}),"Game"===this.state.pageType&&s.a.createElement(y,null),"Stats"===this.state.pageType&&s.a.createElement(v,{dataUrl:"http://localhost:8080/usersStats"}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.24fdca9f.chunk.js.map